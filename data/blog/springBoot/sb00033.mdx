---
title: 'π‘[μ¤ν”„λ§ μ‹νλ¦¬ν‹° OAuth2] Spring Authorization Server - μ£Όμ” λ„λ©”μΈ ν΄λμ¤'
date: 2025-09-13
tags: ['springboot', 'spring-security', 'authorization-server']
draft: false
layout: PostSimple
---

# λ©μ°¨

<TOCInline toc={props.toc} exclude="λ©μ°¨"/>

---

# 1. RegisteredClient / RegisteredClientRepository

## β“ RegisteredClient

- μΈκ°€μ„λ²„μ— λ“±λ΅λ ν΄λΌμ΄μ–ΈνΈλ¥Ό μλ―Έν•λ©° ν΄λΌμ΄μ–ΈνΈκ°€ authorization_code λλ” client_credentialsμ™€ κ°™μ€ κ¶ν• λ¶€μ—¬ νλ¦„μ„ μ‹μ‘ν•λ ¤λ©΄ λ¨Όμ € ν΄λΌμ΄μ–ΈνΈλ¥Ό κ¶ν• λ¶€μ—¬ μ„λ²„μ— λ“±λ΅ν•΄μ•Ό ν•λ‹¤
- ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ μ‹ ν΄λΌμ΄μ–ΈνΈλ” κ³ μ ν• client_id, client_secret λ° κ³ μ ν• ν΄λΌμ΄μ–ΈνΈ μ‹λ³„μμ™€ μ—°κ²°λ λ©”νƒ€λ°μ΄ν„°λ¥Ό ν• λ‹Ήν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ λ©”νƒ€λ°μ΄ν„°λ” ν΄λΌμ΄μ–ΈνΈ μ΄λ¦„λ¶€ν„° ν”„λ΅ν† μ½ νλ¦„κ³Ό κ΄€λ ¨λ ν•­λ©(μ: μ ν¨ν• λ¦¬λ‹¤μ΄λ ‰μ… URI λ©λ΅)κΉμ§€ λ‹¤μ–‘ν•λ‹¤
  - Spring Securityμ OAuth2 Client μ§€μ›μ—μ„ ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ λ¨λΈμ€ ClientRegistration μ΄λ‹¤
- ν΄λΌμ΄μ–ΈνΈμ μ£Όμ” λ©μ μ€ λ³΄νΈλ λ¦¬μ†μ¤μ— λ€ν• μ•΅μ„Έμ¤λ¥Ό μ”μ²­ν•λ” κ²ƒμΌλ΅ ν΄λΌμ΄μ–ΈνΈλ” λ¨Όμ € κ¶ν• λ¶€μ—¬ μ„λ²„λ¥Ό μΈμ¦ν•κ³  μ•΅μ„Έμ¤ ν† ν°κ³Ό κµν™μ„ μ”μ²­ν•©λ‹λ‹¤.
- κ¶ν• λ¶€μ—¬ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈ λ° κ¶ν• λ¶€μ—¬λ¥Ό μΈμ¦ν•κ³  μ ν¨ν• κ²½μ° μ•΅μ„Έμ¤ ν† ν°μ„ λ°κΈ‰ν•κ³  ν΄λΌμ΄μ–ΈνΈλ” μ•΅μ„Έμ¤ ν† ν°μ„ ν‘μ‹ν•μ—¬ λ¦¬μ†μ¤ μ„λ²„μ—μ„ λ³΄νΈλ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•  μ μλ‹¤.

<img src={`${process.env.BASE_PATH}/static/images/springBoot/image00000048.png`} />

## β“ RegisteredClient κµ¬μ„± λ°©λ²•

<img src={`${process.env.BASE_PATH}/static/images/springBoot/image00000049.png`} />

## β“ RegisteredClientRepository

- μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ“±λ΅ν•κ³  κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ΅°νν•  μ μλ” μ €μ¥μ† ν΄λμ¤
- ν΄λΌμ΄μ–ΈνΈ μΈμ¦, κ¶ν• λ¶€μ—¬ μ²λ¦¬, ν† ν° μμ²΄ κ²€μ‚¬, λ™μ  ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ λ“±κ³Ό κ°™μ€ νΉμ • ν”„λ΅ν† μ½ νλ¦„ μ‹ λ‹¤λ¥Έ κµ¬μ„± μ”μ†μ—μ„ μ°Έμ΅°ν•λ‹¤.
- μ κ³µν•λ” κµ¬ν„μ²΄λ΅ InMemoryRegisteredClientRepository λ° JdbcRegisteredClientRepository κ°€ μλ‹¤

<img src={`${process.env.BASE_PATH}/static/images/springBoot/image00000050.png`} />

---
# 2. OAuth2Authorization / OAuth2AuthorizationService

## β“ OAuth2Authorization

- λ¦¬μ†μ¤ μ†μ μμ μ—­ν• μ΄ μλ” κ¶ν• λ¶€μ—¬ λ°©μ‹μΈ κ²½μ° ν΄λΌμ΄μ–ΈνΈμ— λ¶€μ—¬λ κ¶ν• λ¶€μ—¬ μ¦‰ μΈκ°€ μƒνƒλ¥Ό μ μ§€ν•λ” ν΄λμ¤
- Spring Securityμ OAuth2 Client μ ν•΄λ‹Ή μΈμ¦ λ¨λΈμ€ OAuth2AuthorizedClient μ™€ μ„λ΅ λ€μ‘ν•λ” κ°λ…μ΄λ‹¤.
- κ¶ν• λ¶€μ—¬ νλ¦„μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄ OAuth2Authorizationμ΄ μƒμ„±λκ³  AccessToken μ΄ μ €μ¥λλ©° μ„ νƒμ μΌλ΅ RefreshToken, IDToken λ“±μ΄ μ €μ¥λλ‹¤.
- μƒμ„±λ OAuth2Authorization μ€ OAuth2AuthorizationService μ— μν•΄ λ©”λ¨λ¦¬λ‚ DB μ— μ €μ¥λλ‹¤
- OAuth2Authorization μ— μ €μ¥λλ” OAuth2Token νƒ€μ…λ“¤μ€ κ¶ν• λ¶€μ—¬ μ ν• λ° Scope μ— λ”°λΌ λ‹¤λ¥΄λ‹¤

### OAuth2Authorization κµ¬μ΅°

<img src={`${process.env.BASE_PATH}/static/images/springBoot/image00000051.png`} />

## β“ OAuth2AuthorizationService

- OAuth2AuthorizationService λ” μƒλ΅μ΄ OAuth2Authorization μ„ μ €μ¥ν•κ³  κΈ°μ΅΄ OAuth2Authorization μ„ κ²€μƒ‰ν•λ” κµ¬μ„±μ”μ†μ΄λ‹¤
- νΉμ • μ—”λ“ν¬μΈνΈ ν”„λ΅ν† μ½ νλ¦„μ„ λ”°λ¥Ό λ• λ‹¤λ¥Έ κµ¬μ„± μ”μ†μ—μ„ μ‚¬μ©λλ‹¤(μ: ν΄λΌμ΄μ–ΈνΈ μΈμ¦, κ¶ν• λ¶€μ—¬ μ²λ¦¬, ν† ν° μμ²΄ κ²€μ‚¬, ν† ν° μ·¨μ†, λ™μ  ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ λ“±).
- μ κ³µλλ” κΈ°λ³Έ κµ¬ν„μ²΄λ” InMemoryOAuth2AuthorizationService λ° JdbcOAuth2AuthorizationService μ΄ μλ‹¤.
- InMemoryOAuth2AuthorizationService κ°λ° λ° ν…μ¤νΈμ—λ§ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μΌλ©° κΈ°λ³Έκ°’μ΄λ‹¤
- JdbcOAuth2AuthorizationService λ” JdbcTemplate λ¥Ό μ‚¬μ©ν•μ—¬ OAuth2Authorization κ°μ²΄λ¥Ό DB μ— μ €μ¥ν•μ—¬ μƒνƒλ¥Ό κ³„μ† μ μ§€ν•λ„λ΅ ν•λ‹¤

<img src={`${process.env.BASE_PATH}/static/images/springBoot/image00000052.png`} />